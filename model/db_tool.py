# coding: utf-8
import torndb

__author__ = 'tuomao'
from model import dbsetting

db=torndb.Connection(**dbsetting.DATABASE['mysql'])
NONE_LIST_RETURN=[]
NONE_DICT_RETURN={}


def get_permissions():
    query='select * from permission'
    result=db.query(query)
    if result:
        return result
    return NONE_LIST_RETURN

def get_apk_attribute_rate(attr,value,count):
    '''
    :param attr:
    :param value:
    :param count:
    :return:
    '''
    f_count_query='select count(package) FROM apk_permission WHERE %s=%d'%(attr,value)
    f_count=db.query(f_count_query)
    return f_count/count

def tracking_file(files):
    values=','.join(files)
    sql="insert into files VALUES %s "%(values)
    db.insert(sql)


def get_apk_f_c_rate(f,f_value,c,c_value,count):
    query='select count(package)'
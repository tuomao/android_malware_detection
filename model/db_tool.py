# coding: utf-8
import torndb

__author__ = 'tuomao'
from model import dbsetting

NONE_LIST_RETURN=[]
NONE_DICT_RETURN={}

class DbTool(object):
    def __init__(self,con):
        self.db=con

    def get_permissions(self):
        query='select * from permission'
        result=self.db.query(query)
        if result:
            return result
        return NONE_LIST_RETURN

    def get_apk_attribute_rate(self,attr,value,count):
        '''
        :param attr:
        :param value:
        :param count:
        :return:
        '''
        f_count_query='select count(package) FROM apk_permission WHERE %s=%d'%(attr,value)
        f_count=self.db.query(f_count_query)
        return f_count/count

    def tracking_file(self,file):

        sql="insert into files(path,is_malware) values %s"%(file)
        print(sql)
        self.db.insert(sql)

    def get_apk_f_c_rate(self,f,f_value,c,c_value,count):
        query='select count(package)'
